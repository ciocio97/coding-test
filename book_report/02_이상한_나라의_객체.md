> 상태, 행동, 식별자
> 
> 행동이 상태를 결정한다

<br/>

## 왜 상태가 필요한가?

- 모든 일들의 행동의 결과는 과거에 어떤 행동들이 일어났었느냐에 의존
- 과거에 발생한 행동의 이력을 통해 현재 발생한 행동의 결과를 판단하는 방식은 복잡하고 번거로우며 이해하기 어려움
- 하지만 상태를 알면 의존할 필요없음  
  ex) 비행기 탑승 여부는 항공권의 발권 상태를 보고 예측, 텔레비전 전원이 들어온 상태여야만 채널을 변경할 수 있음

    `상태를 이용하면 과거의 모든 행동 이력을 설명하지 않고도 행동의 결과를 쉽게  예측하고 설명 가능`  
    `즉 앨리스의 키와 문의 높이라는 두 가지 상태만 알면 문을 통과하는 행동의 결과를 쉽게 예측할 수 있음`

<br/>

## 상태

<img width="600" alt="02-1" src="https://github.com/ciocio97/Today_I_Learned/assets/80025242/bbfee3d7-6c46-46a8-ac56-3aa69743dec1">
<p></p>

- 상태를 알면 결과를 쉽게 예측할 수 있음
- 객체의 상태는 정적인 프로퍼티, 동적인 프로퍼티로 구성
- 객체의 프로퍼티: 객체를 구성하는 단순한 값인 속성과 객체와 객체를 연결하는 링크의 조합

<br/>

## 행동

- 행동이란 외부의 요청 또는 수신된 메시지에 응답하기 위해 동작하고 반응하는 활동
- 행동의 결과로 객체는 자신의 상태를 변경하거나 다른 객체에게 메시지를 전달할 수 있음
- 객체는 행동을 통해 다른 객체와의 협력에 참여하므로 행동은 외부에 가시적이어야 함

<br/>

## 상태 캡슐화

<img width="600" alt="02-2" src="https://github.com/ciocio97/Today_I_Learned/assets/80025242/7d5762ab-502f-45ab-9fc6-c845e7cb8d69">
<p></p>

- 엘리스에게 전달되는 메시지는 drinkBeverage() 이고, 음료에게 전달되는 메시지는 drunken(quantity)
- 객체는 상태를 캡슐안에 감춰둔 채 외부로 노출하지 않음

    `상태는 외부로 노출하지 않고 행동은 외부에 가시적이어야함`  
    `객체가 외부에 노출하는 것은 행동뿐이며, 외부에서 객체에 접근할 수 있는 방법 역시 행동 뿐임`

- 상태를 외부에 노출시키지 않고 행동을 경계로 캡슐화하는 것은 결과적으로 객체의 자율성을 높임  
  `→ why?`
- 자율적인 객체는 스스로 판단하고 스스로 결정하기 때문에 객체의 자율성이 높아질수록 객체의 지능도 높아짐  
  `→ 협력은 유연하고 간결해진다`

    `상태를 잘 정의된 행동 집합 뒤로 캡슐화하는 것은 객체의 자율성을 높이고 협력을 단순하고 유연하게 만듦`

<br/>

## 식별자

- 객체가 식별가능하다는 것은 객체를 서로 구별할 수 있는 특정 프로퍼티가 객체 안에 존재한다는 것
- 객체와 값의 가장 큰 차이는 값은 식별자를 가지지 않지만, 객체는 식별자를 가진다는 점

<br/>

## 값과 객체

- 값의 경우 불변상태이므로 두 인스턴스의 상태가 같으면 두 인스턴스는 동등 하다고 봄

- 객체의 경우 시간에 따라 변경되는 가변상태이므로 타입이 같은 두 객체의 상태가 같더라도 동등 하다고 볼 수 없고,  
  상태가 다른데도 동일한 객체라고 볼 수 있음  

  ex) 이름이 같고, 나이가 같은 두 사람이 함께 있더라도 둘은 명백히 다른 사람  
  ex) 10년전의 나와 10년 후의 나는 상태가 다르지만 결국 동일한 사람

- 여기에서 말하는 것은, **상태를 기반으로 객체의 동일성을 판단할 수 없다는 것이다. 즉, 객체는 식별자에 의해서만 동일성을 검사할 수 있는 것이다.**

<br/>

## 행동이 상태를 결정한다

`객체를 설계할 때 어떤식으로 접근을 하는지?`

- 상태를 중심으로 객체를 바라보는 것
- 객체에게 필요한 상태가 무엇인지를 찾고 키와 위치를 추가한다 그러고 키와 위치를 변경하거나 조회할 수 있는 행동이 무엇인지를 고민
- 상태를 먼저 결정하고 행동을 나중에 결정하는 방법은 설계에 나쁜 영향을 끼침 `→ why?`
- 상태를 먼저 결정할 경우 캡슐화가 저해됨 `→ why?`
- 상태에 초점을 맞출 경우 상태가 객체 내부로 깔끔하게 캡슐화되지 못하고 공용 인터페이스에 그대로 노출되버릴 확률이 높아짐

    `협력이라는 문맥에서 멀리 벗어난 채 객체를 설계하게 함으로써 자연스럽게 협력에 적합하지 못한 객체를 창조하게 된다`  
    `협력에 참여하는 훌륭한 객체 시민을 양성하기 위한 가장 중요한 덕목은 상태가 아니라 “행동에 초점을 맞추는 것“`

<br/>

## 설계자로서 우리는

- 협력의 문맥에 맞는 적절한 행동을 수행하는 객체를 발견하거나 창조해야함
- 결과적으로 애플리케이션 안에서 어떤 행동을 원하느냐가 어떤 객체가 적합한지를 결정
- “객체의 적합성을 결정하는 것은 상태가 아니라 객체의 행동이다.”
- “객체 지향 설계는 애플리케이션에 필요한 협력을 생각하고 협력에 참여하는 데 필요한 행동을 생각한 후 행동을 수행할 객체를 선택하는 방식으로 수행됨”

    `객체지향 설계란 올바른 객체에게 올바른 책임을 할당하면서 낮은 결합도와 높은 응집도를 가진 구조를 창조하는 활동`

<br/>

## 책임주도 설계 패턴

`GRASP(General Responsibility Assignment Software Patterns) 패턴`  
`객체에게 책임을 할당할 때 지침으로 삼을 수 있는 원칙들의 집합을 패턴형식으로 정리`
